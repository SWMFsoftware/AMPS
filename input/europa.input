
#main

SpeciesList=O2,O2PLUS,OPLUS_HIGH,OPLUS_THERMAL 


makefile  SPICE=/Users/vtenishe/SPICE/cspice



ErrorLog=error.log
Prefix=AMPS
DiagnosticStream=amps.log !!!screen !!screen, filename 'something like amps.log' 
OutputDirectory=out


DebuggerMode=off !on,off
ForceRepeatableSimulationPath=on ! on,off 


makefile  SOURCES=src
makefile  SPICE=/Users/vtenishe/SPICE/Toolkit/cspice
makefile  RUNDIR=run
makefile  MPIRUN=mpirun -np 4
makefile ExternalModules=models/exosphere

ProjectSourceDirectory=srcEuropa

TrajectoryIntersectionWithBlockFaces=off !on, off

WorkingSourceDirectory=srcTemp   !. !srcTemp !the location of the code that will be compiled (current directory == ".")
SourceDirectory=src

!ErrorLog=amps_error.log
Prefix=AMPS
!DiagnosticStream=output/PT/amps.log !!!screen !!screen, filename 'something like amps.log'
!OutputDirectory=output/PT

!PT/plots
ErrorLog=PT/amps_error.log
DiagnosticStream=PT
OutputDirectory=PT/plots


DebuggerMode=off !on,off
ForceRepeatableSimulationPath=off ! on,off

StdoutErrorLog=off !on,off -> print out error message on the screen


CouplerMode=swmf !!!ices !!off, ices, swmf

TimeStepMode=SpeciesGlobalTimeStep
ParticleWeightMode=SpeciesGlobalParticleWeight
ParticleWeightCorrectionMode=on

#endmain

#include species.input

#UserDefinitions
  PIC=on ! on, off
  Mesh=on ! on, off
#endUserDefinitions

#General
  ReferenceInjectionParticleNumber=2000
  MaxMeshRefinmentLevel=12
  EnforceRequestedMeshResolution=on !on,off


! ReferenceInjectionParticleNumber=200
! MaxMeshRefinmentLevel=8! 2 !4
! EnforceRequestedMeshResolution=off !on,off

  BlockCells=5,5,5
  GhostCells=2,2,2
! CutCellVolumeCalculationMaxRefinmentLevel=1

  NastranSurfaceUserData=on !!!on, off
  ControlParticleInsideNastranSurface=off !!!on,of

#endGeneral

#block ../europa.input.pl !process the settings of the Europa's model
  SphereInsideDomain=on !on, off -> place Europa inside the computational domain
  
  !the location of the SPICE kernels 
  SpiceKernelPath=/Users/vtenishe/SPICE/Kernels
  
  !injection of the high energy O+ ions
  EPD_Flux = 1.243919681E6*2*Pi*1e4 !Total Flux [(m^2*s)^-1] 
  
  !injection of the thermal O+ ions
  ThermalOPlus_NumberDensity=35.0E6
  ThermalOPlus_Temperature=1.044E6;
  ThermalOPlus_BulkVelocity=(-90300,0,0);
  
  !Interpolation of the BATSRUS output with ICES
  CreateNewCoordinateListForICES=off !on,off
  IcesLocationPath=/left/ices/ICES
  IcesModelCase=Europa09
  
  !Initial Sample Length
  InitialSampleLength=100
  
  !produce oxigen by magnetospheric ion sputtering
  IonSputteringMode=on !on, off 
  
  !photoionization of sputtered O2
  UnimolecularReaction=GenericTransformation \\   !off, GenericTransformation, Photoionization
    func=Europa::GenericUnimolecularReactionProcessor
  
  !forces that determine particle'strajectories
  Forces=off ,gravity,FrameRotation,Lorentz !off, gravity, Lorentz, FrameRotation
#endblock

#block ../exosphere.pl
  SPICE=on

  ReferenceGroundBasedObservationTime="2008-05-18T00:00:00","2008-07-06T00:00:00","2008-11-07T00:00:00","2007-11-12T00:00:00","2007-06-03T00:00:00"

SpiceKernels="GALILEO/MK00062B.TSC","NAIF/naif0010.tls","PCK/PCK00006.TPC","GALILEO/s980326B.bsp","GALILEO/pk96030a.tpc","GALILEO/galileo.tf"

  define _TARGET_ _EUROPA_ 
  define _PIC_PARTICLE_MOVER__TOTAL_PARTICLE_ACCELERATION_(acclMiddle,spec,ptr,xMiddle,vMiddle,middleNode) Europa::TotalParticleAcceleration(acclMiddle,spec,ptr,xMiddle,vMiddle,middleNode) 
  define _PIC_USER_DEFING_PARTICLE_SAMPLING_(tempParticleData,LocalParticleWeight,tempSamplingBuffer,s) Europa::Sampling::SampleParticleData(tempParticleData,LocalParticleWeight,tempSamplingBuffer,s) 
  define _PIC__USER_DEFINED__MPI_MODEL_DATA_EXCHANGE_MODE_ _PIC__USER_DEFINED__MPI_MODEL_DATA_EXCHANGE_MODE__ON_
  define _PIC__USER_DEFINED__MPI_MODEL_DATA_EXCHANGE_() Europa::ExchangeSurfaceAreaDensity()
  define _PIC__USER_DEFINED__CLEAN_SAMPLING_DATA__MODE_ _PIC__USER_DEFINED__CLEAN_SAMPLING_DATA__MODE__ON_
  define _PIC__USER_DEFINED__CLEAN_SAMPLING_DATA_() Europa::Sampling::FlushSamplingDataBuffers()


  SimulationStartTime=2009-01-24T00:00:00

  addPhysicalModelHeader=Europa.h


!-----------------------------  TYPICAL SOLAR WIND CONDITIONS --------------------------------
  TypicalSolarWindConditions = \\
    v=(-420.0E3,0.0,0.0) \\
    B=(-12.9E-9,4.71E-9,10.29E-9) \\
    T=0.174e6 \\
    n=60.0E6

#endblock


#end
